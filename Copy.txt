tuhelm install sonarqube sonarqube/sonarqube \
  --namespace sonarqube --create-namespace \no
  --set useCommunity=true \
  --set persistence.enabled=true \
  --set postgresql.enabled=true \
  --set postgresql.postgresqlPassword=sonar \
  --set sonarqube.jdbc.username=sonar \
  --set sonarqube.jdbc.password=sonar \
  --set sonarqube.jdbc.url="jdbc:postgresql://sonarqube-postgresql:5432/sonarqube" \
  --set monitoring.enabled=false \
  --set monitoringPasscode="securepass123"


Error: INSTALLATION FAILED: execution error at (sonarqube/templates/validation.yaml:13:4):
 ** The values.yaml file is not valid. **
 Please provide a passcode either setting "monitoringPasscode" or "monitoringPasscodeSecretName" and "monitoringPasscodeSecretKey"


kubectl create namespace sonarqube

kubectl create secret generic sonarqube-monitoring-secret \
  --from-literal=monitoring-passcode=securepass123 \
  -n sonarqube



helm install sonarqube sonarqube/sonarqube \
  --namespace sonarqube --create-namespace \
  --set useCommunity=true \
  --set persistence.enabled=true \
  --set postgresql.enabled=true \
  --set postgresql.postgresqlPassword=sonar \
  --set sonarqube.jdbc.username=sonar \
  --set sonarqube.jdbc.password=sonar \
  --set sonarqube.jdbc.url="jdbc:postgresql://sonarqube-postgresql:5432/sonarqube" \
  --set monitoringPasscodeSecretName=sonarqube-monitoring-secret \
  --set monitoringPasscodeSecretKey=monitoring-passcode



 You must choose an 'edition' to install: 'developer' or 'enterprise'. If you want to use SonarQube Community Build, unset 'edition' and set 'community.enabled=true' instead.






kubectl create namespace sonarqube


kubectl create secret generic sonarqube-monitoring-secret \
  --from-literal=monitoring-passcode=securepass123 \
  -n sonarqube

# 3. Install SonarQube Community Edition with correct chart values
helm install sonarqube sonarqube/sonarqube \
  --namespace sonarqube \
  --create-namespace \
  --set community.enabled=true \
  --set persistence.enabled=true \
  --set postgresql.enabled=true \
  --set postgresql.postgresqlPassword=sonar \
  --set sonarqube.jdbc.username=sonar \
  --set sonarqube.jdbc.password=sonar \
  --set sonarqube.jdbc.url="jdbc:postgresql://sonarqube-postgresql:5432/sonarqube" \
  --set monitoringPasscodeSecretName=sonarqube-monitoring-secret \
  --set monitoringPasscodeSecretKey=monitoring-passcode












testuser@pocvm:~$ kubectl get pods -n sonarqube
NAME                     READY   STATUS    RESTARTS   AGE
sonarqube-postgresql-0   1/1     Running   0          4m27s
sonarqube-sonarqube-0    0/1     Pending   0          4m27s

kubectl describe pods sonarqube-sonarqube-0
Error from server (NotFound): pods "sonarqube-sonarqube-0" not found


Events:
  Type     Reason            Age                    From               Message
  ----     ------            ----                   ----               -------
  Warning  FailedScheduling  2m30s (x2 over 7m46s)  default-scheduler  0/1 nodes are available: 1 Insufficient memory. preemption: 0/1 nodes are available: 1 No preemption victims found for incoming pod.






helm upgrade --install sonarqube sonarqube/sonarqube \
  --namespace sonarqube \
  --create-namespace \
  --set community.enabled=true \
  --set persistence.enabled=true \
  --set postgresql.enabled=true \
  --set postgresql.postgresqlPassword=sonar \
  --set sonarqube.jdbc.username=sonar \
  --set sonarqube.jdbc.password=sonar \
  --set sonarqube.jdbc.url="jdbc:postgresql://sonarqube-postgresql:5432/sonarqube" \
  --set monitoringPasscodeSecretName=sonarqube-monitoring-secret \
  --set monitoringPasscodeSecretKey=monitoring-passcode \
  --set resources.requests.memory=512Mi \
  --set resources.requests.cpu=250m \
  --set resources.limits.memory=1Gi \
  --set resources.limits.cpu=500m

helm upgrade --install sonarqube sonarqube/sonarqube \
  --namespace sonarqube \
  --create-namespace \
  --set community.enabled=true \
  --set persistence.enabled=true \
  --set postgresql.enabled=true \
  --set postgresql.postgresqlPassword=sonar \
  --set sonarqube.jdbc.username=sonar \
  --set sonarqube.jdbc.password=sonar \
  --set sonarqube.jdbc.url="jdbc:postgresql://sonarqube-postgresql:5432/sonarqube" \
  --set monitoringPasscodeSecretName=sonarqube-monitoring-secret \
  --set monitoringPasscodeSecretKey=monitoring-passcode \
  --set resources.requests.memory=512Mi \
  --set resources.requests.cpu=250m \
  --set resources.limits.memory=1Gi \
  --set resources.limits.cpu=500m \
  --set startupProbe.failureThreshold=120 \
  --set startupProbe.periodSeconds=10







