tuhelm install sonarqube sonarqube/sonarqube \
  --namespace sonarqube --create-namespace \
  --set useCommunity=true \
  --set persistence.enabled=true \
  --set postgresql.enabled=true \
  --set postgresql.postgresqlPassword=sonar \
  --set sonarqube.jdbc.username=sonar \
  --set sonarqube.jdbc.password=sonar \
  --set sonarqube.jdbc.url="jdbc:postgresql://sonarqube-postgresql:5432/sonarqube" \
  --set monitoring.enabled=false \
  --set monitoringPasscode="securepass123"


Error: INSTALLATION FAILED: execution error at (sonarqube/templates/validation.yaml:13:4):
 ** The values.yaml file is not valid. **
 Please provide a passcode either setting "monitoringPasscode" or "monitoringPasscodeSecretName" and "monitoringPasscodeSecretKey"


kubectl create namespace sonarqube

kubectl create secret generic sonarqube-monitoring-secret \
  --from-literal=monitoring-passcode=securepass123 \
  -n sonarqube



helm install sonarqube sonarqube/sonarqube \
  --namespace sonarqube --create-namespace \
  --set useCommunity=true \
  --set persistence.enabled=true \
  --set postgresql.enabled=true \
  --set postgresql.postgresqlPassword=sonar \
  --set sonarqube.jdbc.username=sonar \
  --set sonarqube.jdbc.password=sonar \
  --set sonarqube.jdbc.url="jdbc:postgresql://sonarqube-postgresql:5432/sonarqube" \
  --set monitoringPasscodeSecretName=sonarqube-monitoring-secret \
  --set monitoringPasscodeSecretKey=monitoring-passcode



 You must choose an 'edition' to install: 'developer' or 'enterprise'. If you want to use SonarQube Community Build, unset 'edition' and set 'community.enabled=true' instead.





# 1. Create the namespace
kubectl create namespace sonarqube

# 2. Create secret for monitoring passcode
kubectl create secret generic sonarqube-monitoring-secret \
  --from-literal=monitoring-passcode=securepass123 \
  -n sonarqube

# 3. Install SonarQube Community Edition with correct chart values
helm install sonarqube sonarqube/sonarqube \
  --namespace sonarqube \
  --create-namespace \
  --set community.enabled=true \
  --set persistence.enabled=true \
  --set postgresql.enabled=true \
  --set postgresql.postgresqlPassword=sonar \
  --set sonarqube.jdbc.username=sonar \
  --set sonarqube.jdbc.password=sonar \
  --set sonarqube.jdbc.url="jdbc:postgresql://sonarqube-postgresql:5432/sonarqube" \
  --set monitoringPasscodeSecretName=sonarqube-monitoring-secret \
  --set monitoringPasscodeSecretKey=monitoring-passcode
